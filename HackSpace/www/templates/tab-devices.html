<ion-header-bar class="bar-dark">
    <h1 class="title">Your Devices</h1>
    <div class="buttons">
        <button class="button button-icon ion-ios-refresh-empty" ng-click="refresh()">
        </button>
        <button class="button button-icon ion-ios-compose-outline" ng-click="modal.show()">
        </button>
    </div>
</ion-header-bar>

<ion-view>
    <ion-content>
        <div class="rj-contacts-index-bar">Public</div>
        <ion-list>
            <ion-item ng-repeat="device in devices | filter:{accessible:'public'}" ng-click="deviceDetils(device)">
                <div>{{device.name}}</div>
                <div ng-class="{red:true,bold:true}" ng-if="device.state=='activated'">{{device.state}}
                </div>
                <div ng-class="{green:true,bold:true}" ng-if="device.state=='sleep'">{{device.state}}</div>
            </ion-item>
        </ion-list>
      <div class="rj-contacts-index-bar">Private</div>
      <ion-list>
        <ion-item ng-repeat="device in devices | filter:{accessible:'private'}" ng-click="deviceDetils(device)">
          <div>{{device.name}}</div>
          <div ng-class="{red:true,bold:true}" ng-if="device.state=='activated'">{{device.state}}
          </div>
          <div ng-class="{green:true,bold:true}" ng-if="device.state=='sleep'">{{device.state}}</div>
<!--           <div ng-class="{orange:true, bold:true}" ng-if="device.state=='native running '">{{device.state}}</div> -->
        </ion-item>
      </ion-list>
    </ion-content>
</ion-view>

<script id="templates/modal.html" type="text/ng-template">
      <ion-modal-view>
        <ion-header-bar class="bar bar-header bar-dark">
          <h1 class="title">New Device</h1>
          <button class="button button-clear button-primary" ng-click="modal.hide()">Cancel</button>
        </ion-header-bar>
        <ion-content class="padding">
          <div class="list">
            <label class="item item-input">
              <span class="input-label">Device Name</span>
              <input ng-model="newDevice.name" type="text">
            </label>
<!--             <label class="item item-input">
              <span class="input-label">Owner</span>
              <input ng-model="newDevice.owner" type="text">
            </label> -->
            <div class="item item-input item-select">
              <div class="input-label">
              Accessible
              </div>
              <select ng-model="newDevice.accessible" ng-options="accessible.a for accessible in accessibles">
              </select>
            </div>
            <button class="button button-full button-dark" ng-click="registerDevice(newDevice)">Registrate</button>
          </div>
        </ion-content>
      </ion-modal-view>
    </script>


